(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"20Nn":function(e,t,n){"use strict";n.r(t),n.d(t,"AgentModule",(function(){return De}));var i=n("ofXK"),a=n("tyNb"),r=n("M9IT"),o=n("Dh3D"),l=n("ucIW"),s=n("jtHE"),m=n("+0xr"),c=n("pLZG"),d=n("nStZ"),p=n("Ku73"),u=n("0IaG"),f=n("3Pt+"),h=n("O263"),g=n("JX91"),b=n("lJxs"),v=n("BciM"),S=n("PFrk"),y=n("pVHX"),C=n("dyEh"),x=n("fXoL"),E=n("dNgK"),w=n("XiUz"),O=n("NFeN"),I=n("xHqg"),k=n("kmnG"),j=n("qFsG"),F=n("iadO"),P=n("d3UM"),M=n("bTqV"),N=n("/1cH"),A=n("bSwM"),L=n("FKr1");function D(e,t){1&e&&x["\u0275\u0275text"](0,"Donn\xe9es Personnelles")}function G(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"mat-option",44),x["\u0275\u0275text"](1),x["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;x["\u0275\u0275property"]("value",e),x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate1"]("",e," ")}}function V(e,t){1&e&&x["\u0275\u0275text"](0,"Informations Professionnelles")}function T(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"mat-option",45),x["\u0275\u0275listener"]("click",(function(){x["\u0275\u0275restoreView"](e);const n=t.$implicit;return x["\u0275\u0275nextContext"]().setUniteOrganisationnelle(n)})),x["\u0275\u0275elementStart"](1,"small"),x["\u0275\u0275elementStart"](2,"span"),x["\u0275\u0275text"](3),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;x["\u0275\u0275property"]("value",e.nom),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate2"](" ",e.nom," | ",e.description," ")}}function _(e,t){1&e&&x["\u0275\u0275element"](0,"button",46)}function R(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"mat-option",45),x["\u0275\u0275listener"]("click",(function(){x["\u0275\u0275restoreView"](e);const n=t.$implicit;return x["\u0275\u0275nextContext"]().setFonction(n)})),x["\u0275\u0275elementStart"](1,"small"),x["\u0275\u0275elementStart"](2,"span"),x["\u0275\u0275text"](3),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;x["\u0275\u0275property"]("value",e.nom),x["\u0275\u0275advance"](3),x["\u0275\u0275textInterpolate1"](" ",e.nom," ")}}function U(e,t){1&e&&x["\u0275\u0275element"](0,"button",46)}function $(e,t){1&e&&x["\u0275\u0275text"](0,"Confirmation")}function q(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"button",47),x["\u0275\u0275listener"]("click",(function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().submit()})),x["\u0275\u0275text"](1," ENREGISTRER "),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("disabled",e.confirmationFormGroup.invalid)}}function H(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"button",47),x["\u0275\u0275listener"]("click",(function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().submit()})),x["\u0275\u0275text"](1," Mettre \xe0 jour "),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275nextContext"]();x["\u0275\u0275property"]("disabled",e.confirmationFormGroup.invalid)}}let B=(()=>{class e{constructor(e,t,n,i,a,r,o,l,s){this.defaults=e,this.dialogRef=t,this.dialogConfirmationService=n,this.fb=i,this.snackbar=a,this.agentService=r,this.fonctionService=o,this.authService=l,this.uniteOrganisationnelleService=s,this.mode="create",this.matrimoniales=["C\xe9libataire","Mari\xe9(e)","Divorc\xe9(e)","Veu(f|ve)"]}ngOnInit(){this.getUniteOrganisationnelle(),this.validationChamps=new C.f,this.donneesPersoFormGroup=this.fb.group({id:[null],prenom:[null,f.w.required],nom:[null,f.w.required],matrimoniale:[null,f.w.required],dateNaissance:[f.w.required],lieuNaissance:[null,f.w.required],adresse:[null],telephone:[null,f.w.required],email:[null,f.w.required]}),this.informationsPersoFormGroup=this.fb.group({matricule:[null,f.w.required],fonction:[null,f.w.required],uniteOrganisationnelle:[null,f.w.required],dateEngagement:[null,f.w.required],datePriseService:[null,f.w.required]}),this.confirmationFormGroup=this.fb.group({estChef:[!1]}),this.uniteOrganisationnelleCtrl=new f.e,this.fonctionCtrl=new f.e,this.defaults?(this.fonction=this.defaults.fonction,this.uniteOrganisationnelle=this.defaults.uniteOrganisationnelle,this.donneesPersoFormGroup.setValue({id:this.defaults.id,prenom:this.defaults.prenom,nom:this.defaults.nom,matrimoniale:this.defaults.matrimoniale,dateNaissance:new Date(this.defaults.dateNaissance),lieuNaissance:this.defaults.lieuNaissance,adresse:this.defaults.adresse,telephone:this.defaults.telephone,email:this.defaults.email}),this.informationsPersoFormGroup.setValue({matricule:this.defaults.matricule,fonction:this.defaults.fonction.nom,dateEngagement:new Date(this.defaults.dateEngagement),datePriseService:new Date(this.defaults.datePriseService),uniteOrganisationnelle:this.defaults.uniteOrganisationnelle.nom}),this.confirmationFormGroup.setValue({estChef:this.defaults.estChef}),this.mode="update"):this.mode="create"}getUniteOrganisationnelle(){this.uniteOrganisationnelleService.getAll().subscribe(e=>{this.uniteOrganisationnelles=e.body,this.uniteOrganisationnelle=this.defaults?this.defaults.uniteOrganisationnelle:e.body[0]},e=>{},()=>{this.filteredUniteOrganisationnelles=this.uniteOrganisationnelleCtrl.valueChanges.pipe(Object(g.a)(""),Object(b.a)(e=>e?this.filterUniteOrg(e):this.uniteOrganisationnelles.slice()))})}getFonctionsByUnite(e){this.fonctionService.getByUniteOrganisationnelle(e).subscribe(e=>{this.fonctions=e.body,this.fonction=e.body[0]},e=>{},()=>{this.filteredFonctions=this.fonctionCtrl.valueChanges.pipe(Object(g.a)(""),Object(b.a)(e=>e?this.filterFonctions(e):this.fonctions.slice()))})}submit(){"create"===this.mode?this.createAgent():"update"===this.mode&&this.updateAgent()}setUniteOrganisationnelle(e){this.uniteOrganisationnelle=e,this.getFonctionsByUnite(e.id)}setFonction(e){this.fonction=e}createAgent(){let e=this.donneesPersoFormGroup.value;e.estChef=this.confirmationFormGroup.value.estChef,e.matricule=this.informationsPersoFormGroup.value.matricule,e.dateEngagement=this.informationsPersoFormGroup.value.dateEngagement,e.datePriseService=this.informationsPersoFormGroup.value.datePriseService,e.fonction=this.fonction,e.uniteOrganisationnelle=this.uniteOrganisationnelle,this.responsable=null,this.agentService.getAgentResponsable(e.uniteOrganisationnelle.id).subscribe(e=>{this.responsable=e.body},t=>{this.agentService.create(e).subscribe(e=>{this.dialogRef.close(e.body),this.snackbar.open("Enregistrement r\xe9ussi!",null,{duration:5e3})})},()=>{!e.estChef||null==this.responsable||null!=this.responsable&&this.responsable.id==e.id?this.agentService.create(e).subscribe(t=>{this.dialogRef.close(e),this.snackbar.open("Enregistrement r\xe9ussi!",null,{duration:5e3})}):this.snackbar.open(this.responsable.prenom+" "+this.responsable.nom+" est d\xe9ja d\xe9sign\xe9(e) comme chef de cette unit\xe9 organisationnelle!",null,{duration:5e3})})}updateAgent(){let e=this.donneesPersoFormGroup.value;e.estChef=this.confirmationFormGroup.value.estChef,e.matricule=this.informationsPersoFormGroup.value.matricule,e.dateEngagement=this.informationsPersoFormGroup.value.dateEngagement,e.datePriseService=this.informationsPersoFormGroup.value.datePriseService,e.fonction=this.fonction,e.uniteOrganisationnelle=this.uniteOrganisationnelle,this.responsable=null,this.agentService.getAgentResponsable(e.uniteOrganisationnelle.id).subscribe(e=>{this.responsable=e.body},t=>{this.agentService.update(e).subscribe(t=>{this.dialogRef.close(e),this.snackbar.open("Mise \xe0 jour r\xe9ussie!",null,{duration:5e3})})},()=>{!e.estChef||null==this.responsable||null!=this.responsable&&this.responsable.id==e.id?this.agentService.update(e).subscribe(t=>{console.log("response after update : ",t.body),this.dialogRef.close(e),this.snackbar.open("Mise \xe0 jour r\xe9ussie!",null,{duration:5e3})}):this.snackbar.open(this.responsable.prenom+" "+this.responsable.nom+" est d\xe9ja d\xe9sign\xe9(e) comme chef de cette unit\xe9 organisationnelle!",null,{duration:5e3})})}filterFonctions(e){return this.fonctions.filter(t=>0===t.nom.toLowerCase().indexOf(e.toLowerCase()))}filterUniteOrg(e){return this.uniteOrganisationnelles.filter(t=>0===t.nom.toLowerCase().indexOf(e.toLowerCase())||0===t.description.toLowerCase().indexOf(e.toLowerCase()))}isCreateMode(){return"create"===this.mode}isUpdateMode(){return"update"===this.mode}}return e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275directiveInject"](u.a),x["\u0275\u0275directiveInject"](u.g),x["\u0275\u0275directiveInject"](S.a),x["\u0275\u0275directiveInject"](f.d),x["\u0275\u0275directiveInject"](E.b),x["\u0275\u0275directiveInject"](l.a),x["\u0275\u0275directiveInject"](v.a),x["\u0275\u0275directiveInject"](h.a),x["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=x["\u0275\u0275defineComponent"]({type:e,selectors:[["fury-create-update-agent"]],decls:138,vars:38,consts:[["fxLayout","column","fxLayoutAlign","start center"],[1,"card"],["mat-button","","mat-dialog-close","",1,"monIcon"],[3,"linear"],["stepper","matHorizontalStepper"],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[1,"subheading"],["fxLayout","column","fxLayoutGap","8px",1,"content"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px"],["fxFlex","auto"],["formControlName","prenom","matInput","","required","",3,"pattern"],["formControlName","nom","matInput","","required","",3,"pattern"],["placeholder","mm/jj/aaaa","formControlName","dateNaissance","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["picker3",""],["formControlName","lieuNaissance","matInput","","required","",3,"pattern"],["formControlName","email","matInput","","required","",3,"pattern"],["align","end"],["formControlName","telephone","matInput","","required","",3,"pattern"],["formControlName","matrimoniale"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","adresse","matInput","","required",""],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px",1,"actions"],["color","primary","mat-button","","type","button",3,"disabled","click"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled"],["fxFlex",""],["matInput","","formControlName","uniteOrganisationnelle",3,"matAutocomplete","formControl"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["type","button","mat-icon-button","","matSuffix","",4,"ngIf"],["matInput","","formControlName","fonction",3,"matAutocomplete","formControl"],["auto1","matAutocomplete"],["formControlName","matricule","matInput","","required",""],["placeholder","mm/jj/aaaa","formControlName","dateEngagement","matInput","",3,"matDatepicker"],["picker2",""],["placeholder","mm/jj/aaaa","formControlName","datePriseService","matInput","",3,"matDatepicker"],["picker1",""],["color","primary","mat-button","","matStepperPrevious","","type","button"],[1,"heading"],["color","primary","formControlName","estChef",1,"checkbox"],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled","click",4,"ngIf"],[3,"value"],[3,"value","click"],["type","button","mat-icon-button","","matSuffix",""],["color","primary","mat-raised-button","","matStepperNext","",3,"disabled","click"]],template:function(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"div",0),x["\u0275\u0275elementStart"](1,"div",1),x["\u0275\u0275elementStart"](2,"mat-icon",2),x["\u0275\u0275text"](3,"close"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](4,"mat-horizontal-stepper",3,4),x["\u0275\u0275elementStart"](6,"mat-step",5),x["\u0275\u0275elementStart"](7,"form",6),x["\u0275\u0275template"](8,D,1,0,"ng-template",7),x["\u0275\u0275elementStart"](9,"div",8),x["\u0275\u0275elementStart"](10,"small"),x["\u0275\u0275text"](11,"(*) Champs Obligatoires"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](12,"div",9),x["\u0275\u0275elementStart"](13,"div",10),x["\u0275\u0275elementStart"](14,"mat-form-field",11),x["\u0275\u0275elementStart"](15,"mat-label"),x["\u0275\u0275text"](16,"Pr\xe9nom"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](17,"input",12),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](18,"mat-form-field",11),x["\u0275\u0275elementStart"](19,"mat-label"),x["\u0275\u0275text"](20,"Nom"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](21,"input",13),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](22,"div",10),x["\u0275\u0275elementStart"](23,"mat-form-field",11),x["\u0275\u0275elementStart"](24,"mat-label"),x["\u0275\u0275text"](25,"Date de naissance"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](26,"input",14),x["\u0275\u0275elementStart"](27,"mat-datepicker-toggle",15),x["\u0275\u0275elementStart"](28,"mat-icon",16),x["\u0275\u0275text"](29,"date_range"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](30,"mat-datepicker",null,17),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](32,"mat-form-field",11),x["\u0275\u0275elementStart"](33,"mat-label"),x["\u0275\u0275text"](34,"Lieu de naissance"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](35,"input",18),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](36,"div",10),x["\u0275\u0275elementStart"](37,"mat-form-field",11),x["\u0275\u0275elementStart"](38,"mat-label"),x["\u0275\u0275text"](39,"E-Mail"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](40,"input",19),x["\u0275\u0275elementStart"](41,"mat-hint",20),x["\u0275\u0275text"](42,"example@portdakar.sn"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](43,"mat-form-field",11),x["\u0275\u0275elementStart"](44,"mat-label"),x["\u0275\u0275text"](45,"T\xe9l\xe9phone"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](46,"input",21),x["\u0275\u0275elementStart"](47,"mat-hint",20),x["\u0275\u0275text"](48,"(+221)"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](49,"div",10),x["\u0275\u0275elementStart"](50,"mat-form-field",11),x["\u0275\u0275elementStart"](51,"mat-label"),x["\u0275\u0275text"](52,"Situation matrimoniale"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](53,"mat-select",22),x["\u0275\u0275template"](54,G,2,2,"mat-option",23),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](55,"mat-form-field",11),x["\u0275\u0275elementStart"](56,"mat-label"),x["\u0275\u0275text"](57,"Adresse"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](58,"input",24),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](59,"div",25),x["\u0275\u0275elementStart"](60,"button",26),x["\u0275\u0275listener"]("click",(function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275reference"](5).reset()})),x["\u0275\u0275text"](61," REINITIALISER "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](62,"button",27),x["\u0275\u0275text"](63," SUIVANT "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](64,"mat-step",5),x["\u0275\u0275elementStart"](65,"form",6),x["\u0275\u0275template"](66,V,1,0,"ng-template",7),x["\u0275\u0275elementStart"](67,"div",8),x["\u0275\u0275elementStart"](68,"small"),x["\u0275\u0275text"](69,"(*) Champs Obligatoires"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](70,"div",9),x["\u0275\u0275elementStart"](71,"div",10),x["\u0275\u0275elementStart"](72,"mat-form-field",28),x["\u0275\u0275elementStart"](73,"mat-label"),x["\u0275\u0275text"](74,"Choisir une unite organisationnelle"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](75,"input",29),x["\u0275\u0275elementStart"](76,"mat-autocomplete",null,30),x["\u0275\u0275template"](78,T,4,3,"mat-option",31),x["\u0275\u0275pipe"](79,"async"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](80,_,1,0,"button",32),x["\u0275\u0275elementStart"](81,"mat-icon"),x["\u0275\u0275text"](82,"arrow_drop_down"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](83,"small"),x["\u0275\u0275text"](84,"(*) Champs Obligatoires"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](85,"div",9),x["\u0275\u0275elementStart"](86,"div",10),x["\u0275\u0275elementStart"](87,"mat-form-field",28),x["\u0275\u0275elementStart"](88,"mat-label"),x["\u0275\u0275text"](89,"Choisir une fonction"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](90,"input",33),x["\u0275\u0275elementStart"](91,"mat-autocomplete",null,34),x["\u0275\u0275template"](93,R,4,2,"mat-option",31),x["\u0275\u0275pipe"](94,"async"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](95,U,1,0,"button",32),x["\u0275\u0275elementStart"](96,"mat-icon"),x["\u0275\u0275text"](97,"arrow_drop_down"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](98,"div",10),x["\u0275\u0275elementStart"](99,"mat-form-field",11),x["\u0275\u0275elementStart"](100,"mat-label"),x["\u0275\u0275text"](101,"Matricule"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](102,"input",35),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](103,"mat-form-field",11),x["\u0275\u0275elementStart"](104,"mat-label"),x["\u0275\u0275text"](105,"Date d'engagement"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](106,"input",36),x["\u0275\u0275elementStart"](107,"mat-datepicker-toggle",15),x["\u0275\u0275elementStart"](108,"mat-icon",16),x["\u0275\u0275text"](109,"date_range"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](110,"mat-datepicker",null,37),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](112,"mat-form-field",11),x["\u0275\u0275elementStart"](113,"mat-label"),x["\u0275\u0275text"](114,"Date de la prise de service"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](115,"input",38),x["\u0275\u0275elementStart"](116,"mat-datepicker-toggle",15),x["\u0275\u0275elementStart"](117,"mat-icon",16),x["\u0275\u0275text"](118,"date_range"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](119,"mat-datepicker",null,39),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](121,"div",25),x["\u0275\u0275elementStart"](122,"button",40),x["\u0275\u0275text"](123," PRECEDENT "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](124,"button",27),x["\u0275\u0275text"](125," SUIVANT "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](126,"mat-step",5),x["\u0275\u0275elementStart"](127,"form",6),x["\u0275\u0275template"](128,$,1,0,"ng-template",7),x["\u0275\u0275element"](129,"div",41),x["\u0275\u0275elementStart"](130,"div",9),x["\u0275\u0275elementStart"](131,"mat-checkbox",42),x["\u0275\u0275text"](132),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](133,"div",25),x["\u0275\u0275elementStart"](134,"button",40),x["\u0275\u0275text"](135," PRECEDENT "),x["\u0275\u0275elementEnd"](),x["\u0275\u0275template"](136,q,2,1,"button",43),x["\u0275\u0275template"](137,H,2,1,"button",43),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275reference"](31),n=x["\u0275\u0275reference"](77),i=x["\u0275\u0275reference"](92),a=x["\u0275\u0275reference"](111),r=x["\u0275\u0275reference"](120);x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("@fadeInUp",void 0),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("linear",!0),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("stepControl",t.donneesPersoFormGroup),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("formGroup",t.donneesPersoFormGroup),x["\u0275\u0275advance"](10),x["\u0275\u0275property"]("pattern",t.validationChamps.chaine),x["\u0275\u0275advance"](4),x["\u0275\u0275property"]("pattern",t.validationChamps.chaine),x["\u0275\u0275advance"](5),x["\u0275\u0275property"]("matDatepicker",e),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("for",e),x["\u0275\u0275advance"](8),x["\u0275\u0275property"]("pattern",t.validationChamps.chaine),x["\u0275\u0275advance"](5),x["\u0275\u0275property"]("pattern",t.validationChamps.email),x["\u0275\u0275advance"](6),x["\u0275\u0275property"]("pattern",t.validationChamps.telephone),x["\u0275\u0275advance"](8),x["\u0275\u0275property"]("ngForOf",t.matrimoniales),x["\u0275\u0275advance"](6),x["\u0275\u0275property"]("disabled",t.donneesPersoFormGroup.pristine),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("disabled",t.donneesPersoFormGroup.invalid),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("stepControl",t.informationsPersoFormGroup),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("formGroup",t.informationsPersoFormGroup),x["\u0275\u0275advance"](10),x["\u0275\u0275property"]("matAutocomplete",n)("formControl",t.uniteOrganisationnelleCtrl),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("ngForOf",x["\u0275\u0275pipeBind1"](79,34,t.filteredUniteOrganisationnelles)),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",t.uniteOrganisationnelleCtrl.value),x["\u0275\u0275advance"](10),x["\u0275\u0275property"]("matAutocomplete",i)("formControl",t.fonctionCtrl),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("ngForOf",x["\u0275\u0275pipeBind1"](94,36,t.filteredFonctions)),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",t.fonctionCtrl.value),x["\u0275\u0275advance"](11),x["\u0275\u0275property"]("matDatepicker",a),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("for",a),x["\u0275\u0275advance"](8),x["\u0275\u0275property"]("matDatepicker",r),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("for",r),x["\u0275\u0275advance"](8),x["\u0275\u0275property"]("disabled",t.informationsPersoFormGroup.invalid),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("stepControl",t.confirmationFormGroup),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("formGroup",t.confirmationFormGroup),x["\u0275\u0275advance"](5),x["\u0275\u0275textInterpolate1"](" Responsable de l'unit\xe9 organisationnelle (",t.uniteOrganisationnelle.description,") "),x["\u0275\u0275advance"](4),x["\u0275\u0275property"]("ngIf",t.isCreateMode()),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.isUpdateMode())}},directives:[w.d,w.c,O.a,u.d,I.a,I.b,f.x,f.p,f.i,I.c,w.e,k.d,w.b,k.h,f.c,j.b,f.o,f.g,f.v,f.t,F.d,F.f,k.j,F.g,F.c,k.g,P.a,i.l,M.b,I.e,N.c,f.f,N.a,i.m,I.f,A.a,L.o],pipes:[i.b],styles:[".monIcon[_ngcontent-%COMP%]{float:right}.monIcon[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#000}"],data:{animation:[d.a]}}),e})();class W{constructor(e){null!=e&&(this.id=e.id,this.matricule=e.matricule,this.nom=e.nom,this.prenom=e.prenom,this.dateNaissance=e.dateNaissance,this.matrimoniale=e.matrimoniale,this.photo=e.photo,this.sexe=e.sexe,this.email=e.mail,this.telephone=e.telephone,this.dateEngagement=e.dateEngagement,this.datePriseService=e.datePriseService,this.estChef=e.estChef,this.adresse=e.adresse,this.lieuNaissance=e.lieuNaissance,this.uniteOrganisationnelle=e.uniteOrganisationelle,this.fonction=e.fonction)}}var z=n("EUZL"),J=n("9nlD"),X=n("rvYj"),K=n("a+RD");function Q(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"button",8),x["\u0275\u0275listener"]("click",(function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().createAgents()})),x["\u0275\u0275text"](1,"Valider importation"),x["\u0275\u0275elementEnd"]()}}function Z(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"button",8),x["\u0275\u0275listener"]("click",(function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().export()})),x["\u0275\u0275text"](1,"Exporter et corriger"),x["\u0275\u0275elementEnd"]()}}function Y(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"h3"),x["\u0275\u0275text"](1,"Liste des agents charg\xe9e"),x["\u0275\u0275elementEnd"]())}function ee(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"h3"),x["\u0275\u0275text"](1,"Liste des entr\xe9es incorrectes!"),x["\u0275\u0275elementEnd"]())}function te(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"input",9),x["\u0275\u0275listener"]("change",(function(t){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275nextContext"]().onFileChange(t)})),x["\u0275\u0275elementEnd"]()}}function ne(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"td"),x["\u0275\u0275text"](1),x["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate1"](" ",e," ")}}function ie(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"tr"),x["\u0275\u0275template"](1,ne,2,1,"td",7),x["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngForOf",e)}}let ae=(()=>{class e{constructor(e,t,n,i,a,r,o,l,s){this.defaults=e,this.dialogRef=t,this.fb=n,this.snackbar=i,this.agentService=a,this.fonctionService=r,this.authService=o,this.notificationService=l,this.uniteOrganisationnelleService=s,this.mode="create",this.matrimoniales=["C\xe9libataire","Mari\xe9(e)","Divorc\xe9(e)","Veu(f|ve)"],this.isFailedToLoad=!1,this.data=null,this.wopts={bookType:"xlsx",type:"array"},this.fileName="agents.xlsx"}ngOnInit(){this.getAllUnites(),this.getAllFonctions()}onFileChange(e){const t=e.target;if(1!==t.files.length)throw new Error("Cannot use multiple files");const n=new FileReader;n.onload=e=>{const t=z.read(e.target.result,{type:"binary"});this.data=z.utils.sheet_to_json(t.Sheets[t.SheetNames[0]],{header:1})},n.readAsBinaryString(t.files[0])}createAgents(){let e=this.data[0];if("matricule"!=e[0].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Matricule"));if("pr\xe9nom"!=e[1].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Prenom"));if("nom"!=e[2].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Nom"));if("date naissance"!=e[3].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Date Naissance"));if("lieu de naissance"!=e[4].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Lieu de naissance"));if("adresse"!=e[5].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Adresse"));if("situation matrimoniale"!=e[6].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Situation matrimoniale"));if("genre"!=e[7].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Genre"));if("e-mail"!=e[8].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("E-mail"));if("t\xe9l\xe9phone"!=e[9].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("T\xe9l\xe9phone"));if("date engagement"!=e[10].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Date engagement"));if("fonction"!=e[11].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Fonction"));if("unit\xe9 organisationnelle"!=e[12].trim().toLowerCase())return this.notificationService.warn(this.getMessageWarning("Unit\xe9 organisationnelle"));let t=[];for(let n=1;n<this.data.length;n++){const e=this.data[n];let i=new W;i.matricule=e[0],i.prenom=e[1].trim(),i.nom=e[2].trim(),i.dateNaissance=new Date(e[3]),i.lieuNaissance=e[4].trim(),i.adresse=e[5].trim(),i.matrimoniale=e[6].trim(),i.sexe=e[7].trim(),i.email=e[8].trim(),i.telephone=e[9],i.dateEngagement=new Date(e[10]),i.fonction=this.getFonctionByNom(e[11].trim()),i.uniteOrganisationnelle=this.getUniteByCode(e[12].trim()),t.push(i)}this.agentService.createAll(t).subscribe(t=>{if(console.log("Responses save all : ",t),t.body.length>0){this.isFailedToLoad=!0,this.data=[],this.data[0]=e;for(let e=0;e<t.body.length;e++){const n=t.body[e];console.log("before agent : ",n),this.data[e+1]=[n.matricule,n.prenom,n.nom,n.dateNaissance,n.lieuNaissance,n.adresse,n.matrimoniale,n.sexe,n.email,n.telephone,n.dateEngagement,n.fonction.nom,n.uniteOrganisationnelle.code+" - "+n.uniteOrganisationnelle.nom]}}else this.dialogRef.close(t.body)})}getMessageWarning(e){return"La position de la colonne "+e+" est incorrecte. Veuillez consulter le template de chargement!"}getUniteByCode(e){return e=e.substring(0,5),this.uniteOrganisationnelles.find(t=>t.code===e)}getFonctionByNom(e){return this.fonctions.find(t=>t.nom===e)}isSetTable(){return null!=this.data}getAllUnites(){this.uniteOrganisationnelleService.getAll().subscribe(e=>{this.uniteOrganisationnelles=e.body})}getAllFonctions(){this.fonctionService.getAll().subscribe(e=>{this.fonctions=e.body})}export(){const e=z.utils.aoa_to_sheet(this.data),t=z.utils.book_new();z.utils.book_append_sheet(t,e,"Sheet1"),z.writeFile(t,this.fileName),this.isFailedToLoad=!1,this.dialogRef.close(null)}}return e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275directiveInject"](u.a),x["\u0275\u0275directiveInject"](u.g),x["\u0275\u0275directiveInject"](f.d),x["\u0275\u0275directiveInject"](E.b),x["\u0275\u0275directiveInject"](l.a),x["\u0275\u0275directiveInject"](v.a),x["\u0275\u0275directiveInject"](h.a),x["\u0275\u0275directiveInject"](J.a),x["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=x["\u0275\u0275defineComponent"]({type:e,selectors:[["fury-import-agent"]],decls:13,vars:8,consts:[[1,"export-container"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["name","Chargement"],[4,"ngIf"],[1,"card"],["type","file","multiple","false",3,"change",4,"ngIf"],[1,"sjs-table","normal-table","mat-elevation-z8"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["type","file","multiple","false",3,"change"]],template:function(e,t){1&e&&(x["\u0275\u0275elementStart"](0,"div",0),x["\u0275\u0275template"](1,Q,2,0,"button",1),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](2,"div",0),x["\u0275\u0275template"](3,Z,2,0,"button",1),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](4,"fury-page-layout-content"),x["\u0275\u0275elementStart"](5,"fury-list",2),x["\u0275\u0275template"](6,Y,2,0,"h3",3),x["\u0275\u0275template"](7,ee,2,0,"h3",3),x["\u0275\u0275elementStart"](8,"div",4),x["\u0275\u0275template"](9,te,1,0,"input",5),x["\u0275\u0275elementStart"](10,"table",6),x["\u0275\u0275elementStart"](11,"tbody"),x["\u0275\u0275template"](12,ie,2,1,"tr",7),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()),2&e&&(x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.isSetTable()&&!t.isFailedToLoad),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",t.isFailedToLoad),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("@fadeInUp",void 0),x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("ngIf",t.isSetTable()&&!t.isFailedToLoad),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",t.isFailedToLoad),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("@fadeInUp",void 0),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",!t.isSetTable()),x["\u0275\u0275advance"](3),x["\u0275\u0275property"]("ngForOf",t.data))},directives:[i.m,X.a,K.a,i.l,M.b],styles:["a[_ngcontent-%COMP%]{text-decoration:none}.export-container[_ngcontent-%COMP%]{text-align:right;margin-bottom:20px}table[_ngcontent-%COMP%]{width:100%}.m-t-xl[_ngcontent-%COMP%]{margin-top:40px}.m-b-xl[_ngcontent-%COMP%]{margin-bottom:40px}.normal-table-heading[_ngcontent-%COMP%]{margin-top:40px}.normal-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:8px}.normal-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}hr[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:25px}"],data:{animation:[d.a]}}),e})();var re=n("tk/3"),oe=n("z6cu");let le=(()=>{class e{constructor(e){this.httpClient=e,this.url='"/pss-backend/',this.httpOptions={headers:new re.d({"Content-Type":"application/json"})}}errorHandler(e){let t="";return t=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(t),Object(oe.a)(t)}downloadTemplate(e){return this.httpClient.get(this.url+"templates/"+e,{responseType:"blob"})}}return e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275inject"](re.b))},e.\u0275prov=x["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var se=n("Iab2"),me=n("xBcV"),ce=n("Hbgg"),de=n("rnAf"),pe=n("KUt4"),ue=n("STbY");function fe(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"th",17),x["\u0275\u0275elementStart"](1,"mat-checkbox",18),x["\u0275\u0275listener"]("click",(function(t){return x["\u0275\u0275restoreView"](e),t.stopPropagation()})),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}}function he(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"td",19),x["\u0275\u0275elementStart"](1,"mat-checkbox",18),x["\u0275\u0275listener"]("click",(function(t){return x["\u0275\u0275restoreView"](e),t.stopPropagation()})),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}}function ge(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"th",24),x["\u0275\u0275text"](1),x["\u0275\u0275elementEnd"]()),2&e){const e=x["\u0275\u0275nextContext"](2).$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate1"](" ",e.name,"")}}function be(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span"),x["\u0275\u0275text"](1),x["\u0275\u0275pipe"](2,"date"),x["\u0275\u0275elementEnd"]()),2&e){const e=x["\u0275\u0275nextContext"]().$implicit,t=x["\u0275\u0275nextContext"](2).$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate1"](" ",x["\u0275\u0275pipeBind1"](2,1,e[t.property])," ")}}function ve(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"span"),x["\u0275\u0275text"](1),x["\u0275\u0275elementEnd"]()),2&e){const e=x["\u0275\u0275nextContext"]().$implicit,t=x["\u0275\u0275nextContext"](2).$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275textInterpolate1"](" ",e[t.property]," ")}}function Se(e,t){if(1&e&&(x["\u0275\u0275elementStart"](0,"td",25),x["\u0275\u0275template"](1,be,3,3,"span",26),x["\u0275\u0275template"](2,ve,2,1,"span",26),x["\u0275\u0275elementEnd"]()),2&e){const e=x["\u0275\u0275nextContext"](2).$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf","dateNaissance"===e.property||"dateEngagement"===e.property||"datePriseService"===e.property),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf","dateNaissance"!==e.property&&"dateEngagement"!==e.property&&"datePriseService"!==e.property)}}function ye(e,t){if(1&e&&(x["\u0275\u0275elementContainerStart"](0,21),x["\u0275\u0275template"](1,ge,2,1,"th",22),x["\u0275\u0275template"](2,Se,3,2,"td",23),x["\u0275\u0275elementContainerEnd"]()),2&e){const e=x["\u0275\u0275nextContext"]().$implicit;x["\u0275\u0275property"]("matColumnDef",e.property)}}function Ce(e,t){if(1&e&&(x["\u0275\u0275elementContainerStart"](0),x["\u0275\u0275template"](1,ye,3,1,"ng-container",20),x["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("ngIf",e.isModelProperty)}}function xe(e,t){1&e&&x["\u0275\u0275element"](0,"th",27)}function Ee(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"td",19),x["\u0275\u0275elementStart"](1,"button",28),x["\u0275\u0275listener"]("click",(function(t){return x["\u0275\u0275restoreView"](e),t.stopPropagation()})),x["\u0275\u0275elementStart"](2,"mat-icon"),x["\u0275\u0275text"](3,"more_horiz"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](4,"mat-menu",29,30),x["\u0275\u0275elementStart"](6,"button",31),x["\u0275\u0275listener"]("click",(function(){x["\u0275\u0275restoreView"](e);const n=t.$implicit;return x["\u0275\u0275nextContext"]().updateAgent(n)})),x["\u0275\u0275elementStart"](7,"mat-icon"),x["\u0275\u0275text"](8,"edit"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](9,"span"),x["\u0275\u0275text"](10,"Modifier"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](11,"button",31),x["\u0275\u0275listener"]("click",(function(){x["\u0275\u0275restoreView"](e);const n=t.$implicit;return x["\u0275\u0275nextContext"]().deleteAgent(n)})),x["\u0275\u0275elementStart"](12,"mat-icon"),x["\u0275\u0275text"](13,"delete_sweep"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](14,"span"),x["\u0275\u0275text"](15,"Supprimer"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}if(2&e){const e=x["\u0275\u0275reference"](5);x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("matMenuTriggerFor",e)}}function we(e,t){1&e&&x["\u0275\u0275element"](0,"tr",32)}function Oe(e,t){1&e&&x["\u0275\u0275element"](0,"tr",33)}const Ie=function(){return["Gestion-Personnel"]};let ke=(()=>{class e{constructor(e,t,n,i,a){this.dialogConfirmationService=e,this.agentService=t,this.snackbar=n,this.downloadsService=i,this.dialog=a,this.dialogUtil=new C.a,this.subject$=new s.a(1),this.data$=this.subject$.asObservable(),this.pageSize=6,this.columns=[{name:"Checkbox",property:"checkbox",visible:!1},{name:"ID",property:"id",visible:!1,isModelProperty:!0},{name:"Matricule",property:"matricule",visible:!0,isModelProperty:!0},{name:"Prenom",property:"prenom",visible:!0,isModelProperty:!0},{name:"Nom",property:"nom",visible:!0,isModelProperty:!0},{name:"Adresse",property:"adresse",visible:!0,isModelProperty:!0},{name:"E-mail",property:"email",visible:!0,isModelProperty:!0},{name:"T\xe9lephone",property:"telephone",visible:!0,isModelProperty:!0},{name:"Date de naissance",property:"dateNaissance",visible:!1,isModelProperty:!0},{name:"Lieu de naissance",property:"lieuNaissance",visible:!1,isModelProperty:!0},{name:"Date d'engagement",property:"dateEngagement",visible:!1,isModelProperty:!0},{name:"Responsable",property:"estResponsable",visible:!1,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}]}ngOnInit(){this.getAgents(),this.dataSource=new m.k,this.data$.pipe(Object(c.a)(e=>!!e)).subscribe(e=>{this.agents=e,this.dataSource.data=e})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}getAgents(){this.agentService.getAll().subscribe(e=>{this.agents=e.body,console.log("Response Agent :",e)},e=>{console.log("Erreur lors du chargement des donn\xe9es : ",e)},()=>{this.subject$.next(this.agents)})}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}onFilterChange(e){this.dataSource&&(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e,this.dataSource.filterPredicate=(e,t)=>-1!=JSON.stringify(e).toLowerCase().indexOf(t))}ngOnDestroy(){}createAgent(){this.dialog.open(B).afterClosed().subscribe(e=>{e&&(this.agents.unshift(e),this.subject$.next(this.agents))})}importAgent(){this.dialog.open(ae).afterClosed().subscribe(e=>{e&&this.getAgents()})}updateAgent(e){this.dialog.open(B,{data:e}).afterClosed().subscribe(e=>{if(e){console.log("agent to update : ",e);const t=this.agents.findIndex(t=>t.id===e.id);this.agents[t]=e,this.subject$.next(this.agents)}})}deleteAgent(e){this.dialogConfirmationService.confirmationDialog().subscribe(t=>{t===C.a.confirmer&&this.agentService.delete(e).subscribe(t=>{console.log("Agent deleted: ",t),this.agents.splice(this.agents.findIndex(t=>t.id===e.id),1),this.snackbar.open("Suppression r\xe9ussie!",null,{duration:5e3}),this.subject$.next(this.agents)})})}downloadTemplate(){this.downloadsService.downloadTemplate("liste_agents").subscribe(e=>{console.log("Downloads : ",e);let t=new Blob([e]);window.URL.createObjectURL(t),Object(se.saveAs)(t,"agents.xlsx"),this.snackbar.open("T\xe9l\xe9chargement r\xe9ussie!",null,{duration:5e3})})}}return e.\u0275fac=function(t){return new(t||e)(x["\u0275\u0275directiveInject"](S.a),x["\u0275\u0275directiveInject"](l.a),x["\u0275\u0275directiveInject"](E.b),x["\u0275\u0275directiveInject"](le),x["\u0275\u0275directiveInject"](u.b))},e.\u0275cmp=x["\u0275\u0275defineComponent"]({type:e,selectors:[["fury-list-agent"]],viewQuery:function(e,t){var n;1&e&&(x["\u0275\u0275staticViewQuery"](r.a,!0),x["\u0275\u0275staticViewQuery"](o.a,!0)),2&e&&(x["\u0275\u0275queryRefresh"](n=x["\u0275\u0275loadQuery"]())&&(t.paginator=n.first),x["\u0275\u0275queryRefresh"](n=x["\u0275\u0275loadQuery"]())&&(t.sort=n.first))},inputs:{columns:"columns"},decls:30,vars:10,consts:[["mode","card"],["current","Agents",3,"crumbs"],["name","Agents",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-button","","type","button","mat-mini-fab","","color","primary",3,"click"],["matTableExporter","","mat-table","","matSort","",3,"dataSource"],["exporter","matTableExporter"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf"],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","after"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements"]],template:function(e,t){if(1&e){const e=x["\u0275\u0275getCurrentView"]();x["\u0275\u0275elementStart"](0,"fury-page-layout",0),x["\u0275\u0275elementStart"](1,"fury-page-layout-header"),x["\u0275\u0275element"](2,"fury-breadcrumbs",1),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](3,"fury-page-layout-content"),x["\u0275\u0275elementStart"](4,"fury-list",2),x["\u0275\u0275listener"]("filterChange",(function(e){return t.onFilterChange(e)})),x["\u0275\u0275elementStart"](5,"div",3),x["\u0275\u0275elementStart"](6,"button",4),x["\u0275\u0275listener"]("click",(function(){return t.createAgent()})),x["\u0275\u0275elementStart"](7,"mat-icon"),x["\u0275\u0275text"](8,"add"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](9,"button",4),x["\u0275\u0275listener"]("click",(function(){return t.importAgent()})),x["\u0275\u0275elementStart"](10,"mat-icon"),x["\u0275\u0275text"](11,"cloud_upload"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](12,"button",5),x["\u0275\u0275listener"]("click",(function(){return x["\u0275\u0275restoreView"](e),x["\u0275\u0275reference"](19).exportTable("xlsx",{fileName:"liste_des_agents"})})),x["\u0275\u0275elementStart"](13,"mat-icon"),x["\u0275\u0275text"](14,"table_view"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](15,"button",4),x["\u0275\u0275listener"]("click",(function(){return t.downloadTemplate()})),x["\u0275\u0275elementStart"](16,"mat-icon"),x["\u0275\u0275text"](17,"cloud_download"),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementStart"](18,"table",6,7),x["\u0275\u0275elementContainerStart"](20,8),x["\u0275\u0275template"](21,fe,2,0,"th",9),x["\u0275\u0275template"](22,he,2,0,"td",10),x["\u0275\u0275elementContainerEnd"](),x["\u0275\u0275template"](23,Ce,2,1,"ng-container",11),x["\u0275\u0275elementContainerStart"](24,12),x["\u0275\u0275template"](25,xe,1,0,"th",13),x["\u0275\u0275template"](26,Ee,16,1,"td",10),x["\u0275\u0275elementContainerEnd"](),x["\u0275\u0275template"](27,we,1,0,"tr",14),x["\u0275\u0275template"](28,Oe,1,0,"tr",15),x["\u0275\u0275elementEnd"](),x["\u0275\u0275element"](29,"mat-paginator",16),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"](),x["\u0275\u0275elementEnd"]()}2&e&&(x["\u0275\u0275advance"](2),x["\u0275\u0275property"]("@fadeInRight",void 0)("crumbs",x["\u0275\u0275pureFunction0"](9,Ie)),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("@fadeInUp",void 0),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("columns",t.columns),x["\u0275\u0275advance"](14),x["\u0275\u0275property"]("dataSource",t.dataSource),x["\u0275\u0275advance"](5),x["\u0275\u0275property"]("ngForOf",t.columns),x["\u0275\u0275advance"](4),x["\u0275\u0275property"]("matHeaderRowDef",t.visibleColumns),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("matRowDefColumns",t.visibleColumns),x["\u0275\u0275advance"](1),x["\u0275\u0275property"]("pageSize",t.pageSize))},directives:[me.a,ce.a,de.a,X.a,K.a,M.b,O.a,m.j,pe.a,o.a,m.c,m.e,m.b,i.l,m.g,m.i,r.a,m.d,A.a,m.a,i.m,o.b,ue.d,ue.e,ue.b,m.f,m.h],pipes:[i.e],styles:[""],data:{animation:[p.a,d.a]}}),e})();var je=n("9Gh5");const Fe=[{path:"",component:ke,canActivate:[je.a]},{path:"list-agent",component:ke,canActivate:[je.a]},{path:"create-update-agent",component:B,canActivate:[je.a]}];let Pe=(()=>{class e{}return e.\u0275mod=x["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=x["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.j.forChild(Fe)],a.j]}),e})();var Me=n("KthW"),Ne=n("WCGO"),Ae=n("0jmt"),Le=n("q8Jb");let De=(()=>{class e{}return e.\u0275mod=x["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=x["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,Pe,f.j,Me.a,Ne.a,pe.b,Ae.a,Le.a,f.u]]}),e})()},pVHX:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("tk/3"),a=n("z6cu"),r=n("JIr8"),o=n("fXoL");let l=(()=>{class e{constructor(e){this.httpClient=e,this.url="/pss-backend/uniteOrganisationnelles",this.httpOptions={headers:new i.d({"Content-Type":"application/json"})}}getAll(){return this.httpClient.get(this.url,{observe:"response"}).pipe(Object(r.a)(this.errorHandler))}getAllSuperieuresByNiveau(){return this.httpClient.get(this.url+"/niveau/1",{observe:"response"}).pipe(Object(r.a)(this.errorHandler))}getAllInferieures(e){return this.httpClient.get(this.url+"/inferieures/"+e,{observe:"response"}).pipe(Object(r.a)(this.errorHandler))}getAllSuperieures(e){return this.httpClient.get(this.url+"/superieures/"+e,{observe:"response"}).pipe(Object(r.a)(this.errorHandler))}create(e){return this.httpClient.post(this.url,JSON.stringify(e),{headers:this.httpOptions.headers,observe:"response"}).pipe(Object(r.a)(this.errorHandler))}getById(e){return this.httpClient.get(this.url+e,{observe:"response"}).pipe(Object(r.a)(this.errorHandler))}getByCode(e){return this.httpClient.get(this.url+"/code/"+e,{observe:"response"}).pipe(Object(r.a)(this.errorHandler))}update(e){return this.httpClient.put(this.url,JSON.stringify(e),{headers:this.httpOptions.headers,observe:"response"}).pipe(Object(r.a)(this.errorHandler))}delete(e){return this.httpClient.delete(this.url,{headers:this.httpOptions.headers,body:e})}errorHandler(e){let t="";return t=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(t),Object(a.a)(t)}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275inject"](i.b))},e.\u0275prov=o["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);